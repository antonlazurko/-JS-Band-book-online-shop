{"version":3,"sources":["App.js","redux/store.js","index.js","redux/books/selectors.js","redux/books/books-operations.js","redux/books/books-actions.js","redux/books/books-reducers.js","redux/cart/cart-operations.js","redux/cart/cart-selectors.js","redux/cart/cart-reducers.js","redux/cart/cart-actions.js","services/services.js","components/AppBar/AppBar.js","components/Card/Card.js","components/Container/Container.js","components/CartModal/CartModal.js","components/AppBar/AppBar.module.css","components/Card/Card.module.css","components/CartModal/CartModal.module.css","images/cart.png","images/default-book.png"],"names":["LogInView","lazy","CatalogView","BookView","Cart","NotFoundView","App","isLoggedIn","useSelector","selectors","getIsLoggedIn","fallback","type","color","height","width","exact","path","to","autoClose","cart","cartReducers","cartModalReducer","authorization","booksReducers","books","isLoading","bookDetails","error","filter","authPersistConfig","key","storage","whitelist","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","store","configureStore","reducer","persistReducer","combineReducers","devTools","process","persistor","persistStore","ReactDOM","render","StrictMode","loading","document","getElementById","getBooksSelector","state","getFilter","getTokenSelector","token","getFiltredBooks","createSelector","book","title","toLowerCase","includes","getBook","getUserInfo","logIn","createAsyncThunk","userName","a","rejectWithValue","booksServices","userLogin","getBooks","getBookById","bookId","changeFilter","createAction","signOutAction","bookRefreshAction","authInitialState","avatar","createReducer","booksActions","username","booksOperations","fulfilled","_","payload","count","cartActions","addToCart","pending","rejected","cartOperations","purchaseOperation","services","purchase","getCartInfo","getCartModal","existBook","find","cartModalClose","axios","defaults","baseURL","post","data","get","headers","Authorization","AppBar","dispatch","useDispatch","cartInfo","cartSelectors","className","styles","userMenu","src","alt","style","marginRight","marginLeft","onClick","header","reduce","acc","Card","history","useHistory","card","cover","defaultBook","author","footer","price","push","id","Container","children","paddingTop","CartModal","authModalBackdrop","authModal","border","map","module","exports"],"mappings":"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","file":"static/js/main.63d7cf2d.chunk.js","sourcesContent":["/* eslint-disable no-unused-vars */\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\nimport { lazy, Suspense } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport Loader from 'react-loader-spinner';\r\nimport { ToastContainer } from 'react-toastify';\r\n\r\n// eslint-disable-next-line import/no-unresolved\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nimport { AppBar, Container } from './components';\r\nimport { selectors } from './redux/books';\r\n\r\nimport './App.css';\r\n\r\n// lazy import\r\nconst LogInView = lazy(() => import('./views/LogInView'));\r\nconst CatalogView = lazy(() => import('./views/CatalogView'));\r\nconst BookView = lazy(() => import('./views/BookView'));\r\nconst Cart = lazy(() => import('./views/Cart/Cart'));\r\nconst NotFoundView = lazy(() => import('./views/NotFoundView'));\r\n\r\nfunction App() {\r\n  // getting current logging info\r\n  const isLoggedIn = useSelector(selectors.getIsLoggedIn);\r\n\r\n  return (\r\n    <Container>\r\n      {isLoggedIn && <AppBar />}\r\n      <Suspense\r\n        fallback={\r\n          <Loader type=\"ThreeDots\" color=\"#00BFFF\" height={80} width={80} />\r\n        }\r\n      >\r\n        <Switch>\r\n          <Route exact path=\"/js-band-book-online-shop/\">\r\n            {isLoggedIn ? (\r\n              <Redirect to=\"/js-band-book-online-shop/catalog\" />\r\n            ) : (\r\n              <Redirect to=\"/js-band-book-online-shop/login\" />\r\n            )}\r\n          </Route>\r\n          <Route exact path=\"/js-band-book-online-shop/catalog\">\r\n            {isLoggedIn ? (\r\n              <CatalogView />\r\n            ) : (\r\n              <Redirect to=\"/js-band-book-online-shop/login\" />\r\n            )}\r\n          </Route>\r\n          <Route path=\"/js-band-book-online-shop/catalog/:bookId\">\r\n            {isLoggedIn ? (\r\n              <BookView />\r\n            ) : (\r\n              <Redirect to=\"/js-band-book-online-shop/login\" />\r\n            )}\r\n          </Route>\r\n          <Route path=\"/js-band-book-online-shop/cart\">\r\n            {isLoggedIn ? (\r\n              <Cart />\r\n            ) : (\r\n              <Redirect to=\"/js-band-book-online-shop/login\" />\r\n            )}\r\n          </Route>\r\n          <Route path=\"/js-band-book-online-shop/login\">\r\n            {!isLoggedIn ? (\r\n              <LogInView />\r\n            ) : (\r\n              <Redirect exact to=\"/js-band-book-online-shop/catalog\" />\r\n            )}\r\n          </Route>\r\n          <Route>\r\n            <NotFoundView />\r\n          </Route>\r\n        </Switch>\r\n        <ToastContainer autoClose={1800} />\r\n      </Suspense>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\r\nimport {\r\n  persistStore,\r\n  persistReducer,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\nimport { combineReducers } from 'redux';\r\n\r\nimport { booksReducers } from './books';\r\nimport { cartReducers } from './cart';\r\n\r\nconst { cart, cartModalReducer } = cartReducers;\r\nconst {\r\n  authorization,\r\n  books,\r\n  isLoading,\r\n  bookDetails,\r\n  error,\r\n  filter,\r\n} = booksReducers;\r\n\r\nconst authPersistConfig = {\r\n  key: 'auth',\r\n  storage,\r\n  whitelist: ['authorization'],\r\n};\r\nconst middleware = [\r\n  ...getDefaultMiddleware({\r\n    serializableCheck: {\r\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n    },\r\n  }),\r\n];\r\n\r\nconst store = configureStore({\r\n  reducer: persistReducer(\r\n    authPersistConfig,\r\n    combineReducers({\r\n      authorization,\r\n      books,\r\n      isLoading,\r\n      bookDetails,\r\n      error,\r\n      filter,\r\n      cart,\r\n      cartModalReducer,\r\n    }),\r\n  ),\r\n  middleware,\r\n  devTools: process.env.NODE_ENV === 'development',\r\n});\r\nconst persistor = persistStore(store);\r\nexport default { persistor, store };\r\n","/* eslint-disable no-undef */\r\n/* eslint-disable no-unused-vars */\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\nimport store from './redux/store';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store.store}>\r\n      <PersistGate loading={null} persistor={store.persistor}>\r\n        <BrowserRouter>\r\n          <App />\r\n        </BrowserRouter>\r\n      </PersistGate>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n","import { createSelector } from 'reselect';\r\n\r\nconst getIsLoggedIn = (state) => state.authorization.isLoggedIn;\r\nconst getBook = (state) => state.bookDetails;\r\nconst getTokenSelector = (state) => state.authorization.token;\r\nconst getUserInfo = (state) => state.authorization;\r\nconst getBooksSelector = (state) => state.books;\r\nconst getFilter = (state) => state.filter;\r\n\r\nconst getFiltredBooks = createSelector(\r\n  [getBooksSelector, getFilter],\r\n  (books, filter) =>\r\n    // eslint-disable-next-line implicit-arrow-linebreak\r\n    books.filter(\r\n      (book) =>\r\n        // eslint-disable-next-line implicit-arrow-linebreak\r\n        book.title.toLowerCase().includes(filter.toLowerCase()),\r\n      // eslint-disable-next-line function-paren-newline\r\n    ),\r\n);\r\n\r\nexport default {\r\n  getTokenSelector,\r\n  getBooksSelector,\r\n  getFiltredBooks,\r\n  getFilter,\r\n  getIsLoggedIn,\r\n  getBook,\r\n  getUserInfo,\r\n};\r\n","import { createAsyncThunk } from '@reduxjs/toolkit';\r\n\r\n// eslint-disable-next-line import/no-unresolved\r\nimport booksServices from 'services';\r\n\r\nconst logIn = createAsyncThunk(\r\n  'auth/login',\r\n  async (userName, { rejectWithValue }) => {\r\n    try {\r\n      return await booksServices.userLogin(userName);\r\n    } catch {\r\n      return rejectWithValue();\r\n    }\r\n  },\r\n);\r\n\r\nconst getBooks = createAsyncThunk(\r\n  'books/getBooks',\r\n  async (token, { rejectWithValue }) => {\r\n    try {\r\n      return await booksServices.getBooks(token);\r\n    } catch {\r\n      return rejectWithValue();\r\n    }\r\n  },\r\n);\r\n\r\nconst getBookById = createAsyncThunk(\r\n  'books/getBookById',\r\n  async ({ bookId, token }, { rejectWithValue }) => {\r\n    try {\r\n      return await booksServices.getBookById(bookId, token);\r\n    } catch {\r\n      return rejectWithValue();\r\n    }\r\n  },\r\n);\r\n\r\nexport default { logIn, getBooks, getBookById };\r\n","import { createAction } from '@reduxjs/toolkit';\r\n\r\nconst changeFilter = createAction('books/changeFilter');\r\nconst signOutAction = createAction('books/signOut');\r\nconst bookRefreshAction = createAction('books/bookRefresh');\r\n\r\nexport default { changeFilter, signOutAction, bookRefreshAction };\r\n","import { createReducer } from '@reduxjs/toolkit';\r\n\r\nimport booksOperations from './books-operations';\r\nimport cartOperations from '../cart/cart-operations';\r\nimport cartActions from '../cart/cart-actions';\r\n\r\nimport booksActions from './books-actions';\r\nimport { cartReducers } from '../cart';\r\n\r\nconst { cart, cartModalReducer } = cartReducers;\r\nconst authInitialState = {\r\n  userName: '',\r\n  avatar: '',\r\n  token: '',\r\n  isLoggedIn: false,\r\n};\r\n\r\nconst authorization = createReducer(authInitialState, {\r\n  [booksActions.signOutAction]: () => ({\r\n    userName: authInitialState.username,\r\n    avatar: authInitialState.avatar,\r\n    token: authInitialState.token,\r\n    isLoggedIn: authInitialState.isLoggedIn,\r\n  }),\r\n  [booksOperations.logIn.fulfilled]: (_, { payload }) => ({\r\n    userName: payload.username,\r\n    avatar: payload.avatar,\r\n    token: payload.token,\r\n    isLoggedIn: true,\r\n  }),\r\n});\r\n\r\nconst books = createReducer([], {\r\n  [booksOperations.getBooks.fulfilled]: (_, { payload }) => payload,\r\n});\r\n\r\nconst bookDetails = createReducer(\r\n  {},\r\n  {\r\n    [booksOperations.getBookById.fulfilled]: (_, { payload }) => payload,\r\n    [booksActions.bookRefreshAction]: (state, { payload }) => ({\r\n      ...state,\r\n      count: state.count - payload,\r\n    }),\r\n    [cartActions.addToCart]: (state, { payload }) => ({\r\n      ...state,\r\n      count: state.count - payload.count,\r\n    }),\r\n  },\r\n);\r\n\r\nconst filter = createReducer('', {\r\n  [booksActions.changeFilter]: (_, { payload }) => payload,\r\n});\r\n\r\nconst isLoading = createReducer(false, {\r\n  [booksOperations.logIn.pending]: () => true,\r\n  [booksOperations.getBooks.pending]: () => true,\r\n  [booksOperations.getBookById.pending]: () => true,\r\n  [booksOperations.logIn.fulfilled]: () => false,\r\n  [booksOperations.getBooks.fulfilled]: () => false,\r\n  [booksOperations.getBookById.fulfilled]: () => false,\r\n  [booksOperations.logIn.rejected]: () => false,\r\n  [booksOperations.getBooks.rejected]: () => false,\r\n  [booksOperations.getBookById.rejected]: () => false,\r\n  [cartOperations.purchaseOperation.rejected]: () => false,\r\n  [cartOperations.purchaseOperation.fulfilled]: () => false,\r\n  [cartOperations.purchaseOperation.pending]: () => true,\r\n});\r\n\r\nconst error = createReducer(null, {\r\n  [booksOperations.logIn.rejected]: (_, { payload }) => payload,\r\n  [booksOperations.logIn.pending]: () => null,\r\n  [booksOperations.getBooks.rejected]: (_, { payload }) => payload,\r\n  [booksOperations.getBooks.pending]: () => null,\r\n  [booksOperations.getBookById.rejected]: (_, { payload }) => payload,\r\n  [booksOperations.getBookById.pending]: () => null,\r\n  [cartOperations.purchaseOperation.rejected]: (_, { payload }) => payload,\r\n  [cartOperations.purchaseOperation.pending]: () => null,\r\n});\r\n\r\nexport default {\r\n  authorization,\r\n  books,\r\n  isLoading,\r\n  bookDetails,\r\n  error,\r\n  filter,\r\n  cart,\r\n  cartModalReducer,\r\n};\r\n","import { createAsyncThunk } from '@reduxjs/toolkit';\r\n\r\n// eslint-disable-next-line import/no-unresolved\r\nimport services from '../../services/services';\r\n\r\nconst purchaseOperation = createAsyncThunk(\r\n  'cart/purchase',\r\n  async ({ books, token }, { rejectWithValue }) => {\r\n    try {\r\n      return await services.purchase(books, token);\r\n    } catch {\r\n      return rejectWithValue();\r\n    }\r\n  },\r\n);\r\nexport default { purchaseOperation };\r\n","const getCartInfo = (state) => state.cart;\r\nconst getCartModal = (state) => state.cartModalReducer;\r\nexport default { getCartInfo, getCartModal };\r\n","import { createReducer } from '@reduxjs/toolkit';\r\n\r\nimport cartActions from './cart-actions';\r\nimport cartOperations from './cart-operations';\r\n\r\nconst cart = createReducer([], {\r\n  [cartActions.addToCart]: (state, { payload }) => {\r\n    const existBook = state.find((book) => book.bookId === payload.bookId);\r\n    if (existBook) {\r\n      existBook.count += payload.count;\r\n      return state;\r\n    }\r\n    return [...state, payload];\r\n  },\r\n  [cartOperations.purchaseOperation.fulfilled]: () => [],\r\n});\r\nconst cartModalReducer = createReducer(false, {\r\n  [cartOperations.purchaseOperation.fulfilled]: () => true,\r\n  [cartActions.cartModalClose]: () => false,\r\n});\r\nexport default { cart, cartModalReducer };\r\n","import { createAction } from '@reduxjs/toolkit';\r\n\r\nconst addToCart = createAction('cart/addToCart');\r\nconst cartModalClose = createAction('cart/cartModalClose');\r\n\r\nexport default { addToCart, cartModalClose };\r\n","import axios from 'axios';\r\n\r\naxios.defaults.baseURL = 'https://js-band-store-api.glitch.me/';\r\n\r\nconst userLogin = async (userName) => {\r\n  const { data } = await axios.post('signin', {\r\n    username: userName,\r\n  });\r\n  return data;\r\n};\r\n\r\nconst getBooks = async (token) => {\r\n  const { data } = await axios.get('books', {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n  return data;\r\n};\r\n\r\nconst getBookById = async (bookId, token) => {\r\n  const { data } = await axios.get(`books/${bookId}`, {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  });\r\n  return data;\r\n};\r\n\r\nconst purchase = async (books, token) => {\r\n  const { data } = await axios.post(\r\n    'purchase',\r\n    {\r\n      books: [...books],\r\n    },\r\n    {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    },\r\n  );\r\n  return data;\r\n};\r\n\r\nexport default {\r\n  getBookById,\r\n  getBooks,\r\n  userLogin,\r\n  purchase,\r\n};\r\n","/* eslint-disable import/no-unresolved */ /* eslint-disable no-unused-vars */\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { booksActions, selectors } from 'redux/books';\r\nimport { cartSelectors } from 'redux/cart';\r\nimport cart from 'images/cart.png';\r\n\r\nimport styles from './AppBar.module.css';\r\n\r\nconst AppBar = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  // initialize user and cart info\r\n  const { userName, avatar } = useSelector(selectors.getUserInfo);\r\n  const cartInfo = useSelector(cartSelectors.getCartInfo);\r\n\r\n  return (\r\n    <div className=\"AppBar\">\r\n      <div className={styles.userMenu}>\r\n        <p>\r\n          <img src={avatar} alt=\"avatar\" width=\"40px\" />\r\n          Wellcome\r\n          <span\r\n            style={{ color: 'blue', marginRight: '15px', marginLeft: '7px' }}\r\n          >\r\n            {userName}\r\n          </span>\r\n        </p>\r\n        <button\r\n          className=\"btn btn-outline-secondary\"\r\n          type=\"button\"\r\n          onClick={() => dispatch(booksActions.signOutAction())}\r\n        >\r\n          Sign out\r\n        </button>\r\n      </div>\r\n      <div>\r\n        <hr />\r\n        <div className={styles.header}>\r\n          <Link\r\n            exact=\"true\"\r\n            to=\"/js-band-book-online-shop/catalog\"\r\n            style={{ color: 'black' }}\r\n          >\r\n            <h2>JS Band Store</h2>\r\n          </Link>\r\n          <Link to=\"/js-band-book-online-shop/cart\" style={{ color: 'black' }}>\r\n            <img src={cart} alt=\"cart\" />\r\n            Cart(\r\n            {cartInfo.reduce((acc, book) => acc + book.count, 0)})\r\n          </Link>\r\n        </div>\r\n      </div>\r\n      <hr />\r\n    </div>\r\n  );\r\n};\r\nexport default AppBar;\r\n","/* eslint-disable import/no-unresolved */ /* eslint-disable no-unused-vars */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { useHistory } from 'react-router-dom';\r\n// import { Link, useRouteMatch } from 'react-router-dom';\r\n\r\nimport defaultBook from 'images/default-book.png';\r\nimport styles from './Card.module.css';\r\n\r\nconst Card = ({ book }) => {\r\n  // initialize current url for redirect to current book if deploy on Netlify\r\n  // const { url } = useRouteMatch();\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <li className={styles.card}>\r\n      <img src={book.cover ?? defaultBook} width=\"100%\" />\r\n      <h4 className=\"title\">{book.title}</h4> <h5>{book.author}</h5>\r\n      <div className={styles.footer}>\r\n        <h6>{book.price}$</h6>\r\n        {/* <Link to={`${url}/${book.id}`} style={{ color: 'black' }}>\r\n        <button className=\"btn btn-outline-secondary\">View</button>\r\n      </Link> */}\r\n        <button\r\n          className=\"btn btn-outline-secondary\"\r\n          onClick={() => {\r\n            history.push(`/js-band-book-online-shop/catalog/${book.id}`);\r\n          }}\r\n        >\r\n          View\r\n        </button>\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\nCard.propTypes = {\r\n  book: PropTypes.object,\r\n};\r\nexport default Card;\r\n","/* eslint-disable no-unused-vars */\r\nimport React from 'react';\r\n\r\nconst Container = ({ children }) => (\r\n  <div className=\"container\" style={{ paddingTop: '30px' }}>\r\n    {children}\r\n  </div>\r\n);\r\nexport default Container;\r\n","/* eslint-disable import/no-unresolved */ /* eslint-disable no-unused-vars */\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { useDispatch } from 'react-redux';\r\nimport { cartActions } from 'redux/cart';\r\nimport styles from './CartModal.module.css';\r\n\r\nconst CartModal = ({ cartInfo }) => {\r\n  const dispatch = useDispatch();\r\n  return (\r\n    <div className={styles.authModalBackdrop}>\r\n      <div className={styles.authModal}>\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <p className=\"modal-title\">You successfully placed on order!</p>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <div>\r\n                <table border=\"1px\" className=\"table\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Name</th>\r\n                      <th>Count</th>\r\n                      <th>Price</th>\r\n                      <th>Total</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {cartInfo.map((book) => (\r\n                      <tr key={book.bookId}>\r\n                        <td>{book.title}</td>\r\n                        <td>{book.count}</td>\r\n                        <td>{book.price}</td>\r\n                        <td>{book.price * book.count}</td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n                <div>\r\n                  Total price:\r\n                  {cartInfo.reduce(\r\n                    (acc, book) => acc + book.count * book.price,\r\n                    0,\r\n                  )}\r\n                  $\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                className=\"btn btn-outline-secondary\"\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  dispatch(cartActions.cartModalClose());\r\n                }}\r\n              >\r\n                Close\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nCartModal.propTypes = {\r\n  cartInfo: PropTypes.arrayOf(PropTypes.object),\r\n};\r\nexport default CartModal;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userMenu\":\"AppBar_userMenu__3MBGC\",\"header\":\"AppBar_header__1Xapc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Card_card__65W55\",\"footer\":\"Card_footer__1OLQI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"authModalBackdrop\":\"CartModal_authModalBackdrop__2ZM1S\",\"authModal\":\"CartModal_authModal__qHYTX\"};","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAB9ElEQVRIS8XWTahNURTA8d/18Xiej0gk5SNlgjJSRqRM3wADBmYGTEwZoBSlTCgDkomZwshIDBgovRGJIWFggleEyEfrdbb2u+45513nnu4a3bvXXuu/9j57fXQMSTpD4krgjVifBfET99oMKsAL8akH5CF2tAVPJ/6GeV2QWBttG5z7P4jrxcKGFsAfMNnrca3EuxaAucvRXuBY+9UyeKQsnQIcuhM4O6Ag9uBW4atTBn6L1XiCrQMC38RefMFYGfgqDuEHRgYEfo9lmErTMvAu3E/XMiDw78LPEVwuA4/hc7Exfsf1NJFZiGoYshavq2p1inAnHjShYh1eFj5mR9ZUgb9jLq7gcEPwUVzMP10V+Cm24A3WNAQ/wnbEA1sevqrAp3AaceWrGoJfYX6Rx/vqwJvwrCGw2zzy+HYdeE6Rx4NkL8DXOnDo08sex52GESRfU27qRp8YEGJQuIH9DcHTzOvAd7G7sGjSsY7jfE6uA+dDQZMDfyzq9F8fdeDYeAArcKGwuoQXNVGcwyI8R+y/hihIfYFj8ySWZHZRe6c9lkwX0GPZ/22Y6A50JifOX3eyX1wymYY+cj9qQJKTOPO/4NTEwz66VlxjmcQJH2fKnt1tpicOP5sRg2Dq01WfeSmiq0XuxzDxj/QDrnlP/amHBv4DYd5PLNKsYRAAAAAASUVORK5CYII=\"","export default __webpack_public_path__ + \"static/media/default-book.04210348.png\";"],"sourceRoot":""}